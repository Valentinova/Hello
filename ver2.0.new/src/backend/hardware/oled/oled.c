#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <linux/types.h>
#include <string.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <net/if.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <sys/ioctl.h>
#include <bcm2835.h>
#include "oled.h"

#if 1
static unsigned char dis_qing[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x18,0x00,0xFE,
	0xFF,0x03,0x18,0x18,0x00,0xC0,0xFF,0x03,0x00,0x18,0x00,0xE6,0xFF,0x07,0x0F,0x00,
	0x00,0x18,0x00,0x00,0xC0,0xFF,0x01,0xC0,0x80,0x01,0xD8,0x80,0x01,0xDC,0xFF,0x01,
	0xCC,0x80,0x01,0xCC,0x80,0x01,0xCE,0xFF,0x01,0xCE,0x80,0x01,0xC6,0xF8,0x01,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_xiao[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,
	0xC6,0x01,0x7E,0x7E,0x00,0xF6,0x8F,0x00,0x76,0xEC,0x00,0x76,0x78,0x03,0x76,0x3C,
	0x03,0x7E,0x7F,0x03,0xF6,0xC1,0x01,0x76,0x00,0x00,0xF6,0xFF,0x03,0x76,0x76,0x00,
	0x76,0x76,0x00,0x7E,0x77,0x03,0x06,0x73,0x03,0xC0,0x71,0x03,0xE0,0xE0,0x03,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_ke[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0x00,0xF0,
	0xE0,0x00,0x1E,0xE6,0x00,0x18,0xEE,0x00,0x18,0xFC,0x00,0x18,0xF8,0x00,0xFF,0xE0,
	0x00,0x18,0xE3,0x00,0x78,0xE6,0x00,0xDC,0xEC,0x00,0xDC,0xE0,0x00,0x1E,0xF8,0x03,
	0x9E,0xEF,0x00,0x1B,0xE0,0x00,0x18,0xE0,0x00,0x18,0xE0,0x00,0x18,0xE0,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_ji[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x18,
	0x18,0x00,0x18,0x18,0x00,0x98,0xFF,0x03,0x7F,0x18,0x00,0x18,0x18,0x00,0x18,0x18,
	0x00,0xD8,0xFF,0x01,0x78,0x83,0x01,0x1F,0xC3,0x00,0x18,0xC6,0x00,0x18,0x66,0x00,
	0x18,0x3C,0x00,0x18,0x38,0x00,0x18,0x7E,0x00,0x98,0xC3,0x01,0xCE,0x00,0x03,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_l3[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,
	0x00,0x00,0xCC,0x01,0x00,0x80,0x03,0x00,0x80,0x03,0x00,0x80,0x03,0x00,0xC0,0x01,
	0x00,0x78,0x00,0x00,0xC0,0x01,0x00,0x80,0x03,0x00,0x00,0x03,0x00,0x00,0x03,0x00,
	0x80,0x03,0x00,0xC6,0x01,0x00,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_G[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,
	0x07,0x00,0x38,0x0C,0x00,0x1C,0x00,0x00,0x0C,0x00,0x00,0x0E,0x00,0x00,0x06,0x00,
	0x00,0x06,0x00,0x00,0x86,0x1F,0x00,0x06,0x1C,0x00,0x0E,0x1C,0x00,0x0E,0x1C,0x00,
	0x1C,0x1C,0x00,0x38,0x1C,0x00,0xF0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_R[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,
	0x01,0x00,0x8C,0x03,0x00,0x0C,0x07,0x00,0x0C,0x07,0x00,0x0C,0x07,0x00,0x0C,0x07,
	0x00,0x8C,0x03,0x00,0xFC,0x00,0x00,0xCC,0x01,0x00,0x8C,0x03,0x00,0x0C,0x03,0x00,
	0x0C,0x07,0x00,0x0C,0x0E,0x00,0x0C,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};	

static unsigned char dis_E[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,
	0x03,0x00,0x0C,0x00,0x00,0x0C,0x00,0x00,0x0C,0x00,0x00,0x0C,0x00,0x00,0x0C,0x00,
	0x00,0xFC,0x01,0x00,0x0C,0x00,0x00,0x0C,0x00,0x00,0x0C,0x00,0x00,0x0C,0x00,0x00,
	0x0C,0x00,0x00,0x0C,0x00,0x00,0xFC,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};


static unsigned char dis_N[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,
	0x38,0x00,0x3C,0x38,0x00,0x3C,0x38,0x00,0x7C,0x38,0x00,0xEC,0x38,0x00,0xCC,0x38,
	0x00,0xCC,0x39,0x00,0x8C,0x39,0x00,0x8C,0x3B,0x00,0x0C,0x3F,0x00,0x0C,0x3E,0x00,
	0x0C,0x3E,0x00,0x0C,0x3C,0x00,0x0C,0x38,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_T[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,
	0x07,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,
	0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,
	0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_C[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,
	0x07,0x00,0x38,0x0C,0x00,0x1C,0x00,0x00,0x0C,0x00,0x00,0x0E,0x00,0x00,0x0E,0x00,
	0x00,0x06,0x00,0x00,0x06,0x00,0x00,0x06,0x00,0x00,0x0E,0x00,0x00,0x0E,0x00,0x00,
	0x1C,0x00,0x00,0x38,0x0C,0x00,0xE0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_H[72] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,
	0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,
	0x00,0xFC,0x1F,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,
	0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x0C,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_rod[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_dot[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_0[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x00,0x36,0x00,0x32,0x00,0x33,0x00,
	0x33,0x00,0x33,0x00,0x36,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_1[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x00,0x0E,0x00,0x08,0x00,0x08,0x00,
	0x08,0x00,0x08,0x00,0x08,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_2[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x00,0x32,0x00,0x30,0x00,0x30,0x00,
	0x18,0x00,0x0C,0x00,0x06,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_3[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x00,0x32,0x00,0x10,0x00,0x1E,0x00,
	0x30,0x00,0x30,0x00,0x32,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_4[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x1C,0x00,0x1C,0x00,0x16,0x00,
	0x13,0x00,0x3F,0x00,0x10,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_5[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x06,0x00,0x06,0x00,0x1E,0x00,
	0x30,0x00,0x30,0x00,0x32,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_6[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x00,0x06,0x00,0x06,0x00,0x3E,0x00,
	0x36,0x00,0x22,0x00,0x36,0x00,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_7[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x30,0x00,0x10,0x00,0x18,0x00,
	0x18,0x00,0x0C,0x00,0x0C,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_8[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x00,0x36,0x00,0x36,0x00,0x1C,0x00,
	0x3E,0x00,0x33,0x00,0x33,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

static unsigned char dis_9[32] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x00,0x36,0x00,0x33,0x00,0x36,0x00,
	0x3E,0x00,0x30,0x00,0x30,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

#endif

void write_register(unsigned char Data);
void write_parameter(unsigned char Data);
void set_column_address(unsigned char a, unsigned char b);
void set_row_address(unsigned char a, unsigned char b);
void display_oled_24(unsigned char *array, int col_s, int col_e, int row_s, int row_e);
void display_oled_16(unsigned char *array, int col_s, int col_e, int row_s, int row_e);
int getlocalip(char *outip);
int display_ip(void);
void init_ssd1322(void);
void clear_oled (void);
void display_font (void);
//unsigned char * int_to_char(int num);

void write_register(unsigned char Data)
{
	bcm2835_gpio_write(GDI, LOW);
	bcm2835_spi_transfer(Data);
	bcm2835_gpio_write(GDI, HIGH);
}

void write_parameter(unsigned char Data)
{
	bcm2835_gpio_write(GDI, HIGH);	
	bcm2835_spi_transfer(Data);
	bcm2835_gpio_write(GDI, HIGH);
}

void set_column_address(unsigned char a, unsigned char b)
{
	write_register(0x15);
	write_parameter(0x1c + a);
	write_parameter(0x1c + b);
}

void set_row_address(unsigned char a, unsigned char b)
{
	write_register(0x75);
	write_parameter(a);
	write_parameter(b);
}

void display_oled_24(unsigned char *array, int col_s, int col_e, int row_s, int row_e)
{
	int i, j;
	unsigned char out = 0;

	set_column_address(col_s, col_e);
	set_row_address(row_s, row_e);
        
	write_register(0x5C);
	for(i = 0; i < 72; i++)
	{                   
		for(j = 0; j < 4; j++)
		{
			out = 0;
			if (array[i] == 0) {
				write_parameter(out);
				continue;	
			}
				
			if (array[i] & (1 << (2 * j)))
				out = out | 0xf0;
			if (array[i] & (1 << (2 * j + 1)))
				out = out | 0x0f;
			write_parameter(out);
		}
	}
}

void display_oled_16(unsigned char *array, int col_s, int col_e, int row_s, int row_e)
{
	int i, j;
	unsigned char out = 0;

	set_column_address(col_s, col_e);
	set_row_address(row_s, row_e);

	write_register(0x5C);

	for(i=0; i<32;i++)
	{                   
		for(j=0;j<4;j++)
		{
			out = 0;
			if (array[i] == 0) {
				write_parameter(out);
				continue;	
			}

			if (array[i] & (1 << (2 * j)))
				out = out | 0xf0;
			if (array[i] & (1 << (2 * j + 1)))
				out = out | 0x0f;
			write_parameter(out);
		}
	}
}

int getlocalip(char *outip)
{
	int i = 0;
	int sockfd;
	struct ifconf ifconf;
	char buf[512];
	struct ifreq *ifreq;
	char *ip;

	ifconf.ifc_len = 512;
	ifconf.ifc_buf = buf;

	if((sockfd = socket(AF_INET, SOCK_DGRAM, 0))<0)
	{
		return -1;
	}

	ioctl(sockfd, SIOCGIFCONF, &ifconf);
	close(sockfd);

	ifreq = (struct ifreq *)buf;
	for(i= (ifconf.ifc_len/sizeof(struct ifreq)); i > 0; i--) {
		ip = inet_ntoa(((struct sockaddr_in*)&(ifreq->ifr_addr))->sin_addr);
		if(strcmp(ip,"127.0.0.1") == 0)
		{
			ifreq++;
			continue;
		}

		strcpy(outip, ip);
		return 0;
	}

	return -1;
}

int display_ip(void)
{
	char ip[20];
	int ip_length = 0;
	char *ptr = 0;
	int offset = 0;
	int num = 0;
	unsigned char *buf = NULL;
	
	if ( getlocalip(ip) == 0 ) {
		ip_length = strlen(ip);
		offset = (64 - ip_length * 4);
		ptr = ip;

		while (*ptr != '\0') {
			if (*ptr == '.') {
				display_oled_16(dis_dot, offset, offset + 3, 48, 63);
				offset+=4;
			}else{
				num = *ptr - 48;
				switch(num) {
					case 0:
					buf = dis_0;
					break;

					case 1:
					buf = dis_1;
					break;

					case 2:
					buf = dis_2;
					break;

					case 3:
					buf = dis_3;
					break;

					case 4:
					buf = dis_4;
					break;

					case 5:
					buf = dis_5;
					break;

					case 6:
					buf = dis_6;
					break;

					case 7:
					buf = dis_7;
					break;

					case 8:
					buf = dis_8;
					break;

					case 9:
					buf = dis_9;
					break;
				}
				display_oled_16(buf, offset, offset + 3, 48, 63);
				offset+=4;
			}
			ptr++;
		}
		return 0;
	}
	return -1;
}

void init_ssd1322(void)
{
	bcm2835_gpio_write(GRST, LOW);
	delay(10);
	bcm2835_gpio_write(GRST, HIGH);


	write_register(0xFD);           	// Unlock Command
	write_parameter(0x12);

	write_register(0xAE);           	// Display Off

	write_register(0xB3);            	// Set Clock 
	write_parameter(0x91);    		// 135 Frames/Sec

	write_register(0xCA);			// 1/64 Duty (0x0F~0x5F)			
	write_parameter(0x3F); 

	write_register(0xA2);			// Set Display Offset
	write_parameter(0x00); 

	write_register(0xA1);			// Set Mapping RAM Display Start Line (0x00~0x5F)
	write_parameter(0x00); 

	write_register(0xA0);			
	write_parameter(0x14); 			
	write_parameter(0x11);			// Set Column Address 0 Mapped to SEG0
								//     Disable Nibble Remap
								//     Horizontal Address Increment
								//     Scan from COM[N-1] to COM0
								//     Disable COM Split Odd Even
								//     Enable Dual COM Line Mode

	write_register(0xB5);			// Set GPIO off
	write_parameter(0x00);

	write_register(0xB1);			// Set Phase 1 as 5 Clocks & Phase 2 as 5 Clocks
	write_parameter(0x52);

	write_register(0xAB);			// Disable Embedded DC/DC Converter (0x00/0x01)
	write_parameter(0x01);

	write_register(0xB4);			// Enable External VSL
	write_parameter(0xA0);
	write_parameter(0xFD);

	write_register(0xC1);			// Set Brightness
	write_parameter(0x9F);	

	write_register(0xC7);			// Set Master Contrast Current
	write_parameter(0x0f);	
	
	write_register(0xB9);			// Set Gray Scale Table
	
	write_register(0xB1);			// Set Phase Lenth
	write_parameter(0xE2);
	
	write_register(0xD1);			// Set Enhance Driving Scheme Capability
	write_parameter(0x82);
	write_parameter(0x20);	
	
	write_register(0xBB);			// Set Pre-Charge Voltage Level
	write_parameter(0x1f);
	
	write_register(0xBE);			// Set High Voltage Level of COM Pin
	write_parameter(0x07);	
	
	write_register(0xA6);			// Normal Display Mode
	
	write_register(0xAF);			// Display On 	
}

void clear_oled (void)
{
	unsigned char x,y;

	set_column_address(0, 63);
	set_row_address(0, 63);
        
	write_register(0x5C);
	
	for(y = 0; y < 64; y++)
	{                   
		for(x = 0; x < 128; x++)
		{    
			write_parameter(0);
		}
	}
}

void display_font (void)
{

	display_oled_24(dis_qing, 10, 15, 0, 23);

	display_oled_24(dis_xiao, 22, 27, 0, 23);

	display_oled_24(dis_ke, 34, 39, 0, 23);

	display_oled_24(dis_ji, 46, 51, 0, 23);

	display_oled_24(dis_l3, 0, 5, 24, 47);

	display_oled_24(dis_G, 6, 11, 24, 47);

	display_oled_24(dis_R, 12, 17, 24, 47);

	display_oled_24(dis_E, 18, 23, 24, 47);

	display_oled_24(dis_E, 24, 29, 24, 47);

	display_oled_24(dis_N, 30, 35, 24, 47);

	display_oled_16(dis_rod, 36, 39, 24, 47);

	display_oled_24(dis_T, 40, 45, 24, 47);

	display_oled_24(dis_E, 46, 51, 24, 47);

	display_oled_24(dis_C, 52, 57, 24, 47);

	display_oled_24(dis_H, 58, 63, 24, 47);

	(void) display_ip();
}
void display_oled_image(const unsigned char * array)
{
	int i, j;
	unsigned char out = 0;

	set_column_address(0, 254);
	set_row_address(0, 63);
        
	write_register(0x5C);
	for(i = 0; i < 49160; i++)
	{                   
		for(j = 0; j < 4; j++)
		{
			out = 0;
			if (array[i] == 0) {
				write_parameter(out);
				continue;	
			}
				
			if (array[i] & (1 << (2 * j)))
				out = out | 0xf0;
			if (array[i] & (1 << (2 * j + 1)))
				out = out | 0x0f;
			write_parameter(out);
		}
	}
	
}

int oled_init(void)
{
	if(!bcm2835_init())
		return -1;

	bcm2835_spi_begin();
	bcm2835_spi_setBitOrder(BCM2835_SPI_BIT_ORDER_MSBFIRST);
	bcm2835_spi_setDataMode(BCM2835_SPI_MODE0);
	bcm2835_spi_setClockDivider(BCM2835_SPI_CLOCK_DIVIDER_1024);
	bcm2835_spi_chipSelect(BCM2835_SPI_CS0);
	bcm2835_spi_setChipSelectPolarity(BCM2835_SPI_CS0, LOW);

	bcm2835_gpio_fsel(GDI, BCM2835_GPIO_FSEL_OUTP);
	init_ssd1322();

	clear_oled();
	delay(10);
	display_font();
	display_int(0);
//	bcm2835_spi_end();
//	bcm2835_close();

	return 0;
}
/*
unsigned char * int_to_char(int num)
{
	unsigned char array[10];
	int temp = num;
	int i =0;
	for(i = 0;i<10;i++)
	{
		array[i] = temp % 10 +'0' ;
		temp = temp / 10;
		if(temp == 0)
		{
		 	array[i+1] = '\0';
		 	break;
		}
	}
	return array;
}
*/
void display_int(int num)
{
	unsigned char array[10];
	unsigned char *buf;
	int offset = 10;
	int temp = num;
	int i =0;
	for(i = 1;i<10;i++)
	{
		array[i] = temp % 10 +'0' ;
		temp = temp / 10;
		if(temp == 0)
		{
		 	array[i+1] = '\0';
		 	break;
		}
	}
	//i = 0;
	while(i != 0)
	{
		switch(array[i]-'0')
		{
			case 0:
			buf = dis_0;
			break;

			case 1:
			buf = dis_1;
			break;

			case 2:
			buf = dis_2;
			break;

			case 3:
			buf = dis_3;
			break;

			case 4:
			buf = dis_4;
			break;

			case 5:
			buf = dis_5;
			break;

			case 6:
			buf = dis_6;
			break;

			case 7:
			buf = dis_7;	
			break;

			case 8:
			buf = dis_8;
			break;

			case 9:
			buf = dis_9;
			break;
		}
		
		display_oled_16(buf, offset, offset + 3, 48, 63);
		offset+=4;
		i--;
	}
}
